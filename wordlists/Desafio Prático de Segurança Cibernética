Tutorial CLI: Ataques de Força Bruta com Kali e Medusa
Pré-requisitos (Configuração Inicial)
Assuma que:

O Kali Linux e o Metasploitable 2 estão rodando no VirtualBox.

A rede está configurada como Host-Only (ou Rede Interna) e as VMs estão se comunicando.

O IP do seu Metasploitable 2 (alvo) é [IP_DO_ALVO] (você deve substituí-lo em todos os comandos).

1. Verificar Conectividade (No Terminal do Kali)
Para confirmar se o Kali está "vendo" o Metasploitable:

Bash

ping -c 4 [IP_DO_ALVO]
2. Criar Wordlists (No Terminal do Kali)
Vamos criar as wordlists na sua pasta Home (~):

Bash

# 2.1. Criar Wordlist de Senhas Fracas
nano senhas_fracas.txt

# (Cole as seguintes senhas dentro do editor nano. Pressione CTRL+X, depois S e Enter para salvar.)
# CONTEÚDO:
# msfadmin
# password
# 123456
# toor
# admin123
# admin

# 2.2. Criar Wordlist de Usuários Comuns
nano usuarios_comuns.txt

# (Cole os seguintes usuários dentro do editor nano. Pressione CTRL+X, depois S e Enter para salvar.)
# CONTEÚDO:
# msfadmin
# user
# guest
# ftpuser
# postgres
# root
# administrator
1. Cenário A: Força Bruta em Serviço FTP (Porta 21)
Este é um ataque clássico de Força Bruta de Senhas, usando um usuário conhecido.

Comando de Ataque Medusa
Execute este comando no terminal do Kali, substituindo [IP_DO_ALVO] e o caminho completo para a wordlist:

Bash

medusa -H [IP_DO_ALVO] -u msfadmin -P /home/kali/senhas_fracas.txt -M ftp -O resultado_ftp.txt
Parâmetro	Função
-H	Host: Endereço IP do alvo.
-u	User: Usuário único a ser testado.
-P	Password list: Caminho para o arquivo de wordlist de senhas.
-M	Module: Define o serviço (protocolo) a ser atacado.
-O	Output: Salva o resultado em um arquivo (para facilitar a documentação).

Exportar para as Planilhas
Ação Necessária
Aguarde até o Medusa terminar.

Capture a tela do terminal mostrando a linha de SUCCESS com as credenciais encontradas.

Salve a Imagem: ftp_bruteforce_sucesso.png

2. Cenário B: Password Spraying em Serviço SMB (Porta 445)
Este é um ataque de Password Spraying (Pulverização de Senha), usando uma única senha contra múltiplos usuários.

Comando de Ataque Medusa
Execute este comando no terminal do Kali, substituindo [IP_DO_ALVO] e o caminho completo para a wordlist:

Bash

medusa -H [IP_DO_ALVO] -U /home/kali/usuarios_comuns.txt -p msfadmin -M smb -O resultado_smb.txt
Parâmetro	Função
-H	Host: Endereço IP do alvo.
-U	User list: Caminho para o arquivo de wordlist de usuários.
-p	Password: Senha única a ser testada.
-M	Module: Define o serviço (protocolo) a ser atacado.

Exportar para as Planilhas
Ação Necessária
Aguarde até o Medusa terminar.

Capture a tela do terminal mostrando a linha de SUCCESS com as credenciais encontradas.

Salve a Imagem: smb_passwordspraying_sucesso.png

3. Cenário C: Automação em Formulário Web (DVWA)
Para este cenário, o Burp Suite Intruder é a ferramenta padrão e mais eficaz para formulários web. Seguiremos um passo a passo para a interface gráfica, pois o ataque via CLI seria excessivamente complexo.

Ações Sequenciais (GUI)
#	Ação	Detalhe
1	Acessar o Alvo	Abra o navegador (Firefox) no Kali e acesse http://[IP_DO_ALVO]/dvwa. Faça o login (admin/password).
2	Configurar Segurança	Vá em DVWA Security, mude para o nível Low e clique em Submit.
3	Iniciar Burp Suite	No Kali, abra o Burp Suite Community Edition. Aceite os defaults e espere a interface carregar.
4	Configurar Proxy	No Burp, vá para a aba Proxy → Options. Confirme que o Listener está em 127.0.0.1:8080.
5	Configurar Navegador	No Firefox, vá em Configurações → General → Network Settings. Configure o Manual Proxy Configuration: HTTP Proxy como 127.0.0.1, Port como 8080.
6	Navegar para o Módulo	No navegador, vá para o módulo Brute Force no DVWA.
7	Capturar Requisição	No Burp, vá para a aba Proxy → Intercept. Clique em "Intercept is on".
8	Forçar o Erro	No navegador, digite qualquer credencial (ex: teste/teste) e clique em Login. A requisição será capturada no Burp.
9	Enviar para Intruder	No Burp, clique com o botão direito na requisição capturada → Send to Intruder.
10	Desligar Interceptação	No Burp, volte para Proxy → Intercept e clique em "Intercept is off".

Exportar para as Planilhas
Configuração do Ataque Intruder
Aba Intruder → Positions:

Attack Type: Mude para Cluster Bomb (para testar cada combinação de usuário e senha).

Clique em Clear § (Limpar) para remover marcações automáticas.

Marque os Alvos: Na área de Requisição HTTP, selecione o valor de username e clique em Add §. Repita para o valor de password.

Aba Intruder → Payloads:

Payload Set 1 (Usuários):

Payload Options: Cole o conteúdo do seu arquivo usuarios_comuns.txt.

Payload Set 2 (Senhas):

Payload Options: Cole o conteúdo do seu arquivo senhas_fracas.txt.

Aba Intruder → Start attack:

Clique em Start attack (no canto superior direito).

Analise os Resultados: Ordene a tabela de resultados pela coluna Length (Tamanho). A linha de admin:password terá um length diferente das tentativas falhas, indicando o sucesso.

Ação Necessária
Capture a tela da janela do Burp Intruder mostrando a linha de credenciais bem-sucedidas destacada pelo tamanho diferente.

Salve a Imagem: dvwa_bruteforce_sucesso.png
